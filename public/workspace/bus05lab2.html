<!DOCTYPE html>
<html ng-app="sampleApp">
<head>
	<meta charset="UTF-8">
	<title>bus05定時車機資訊</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
	<script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
	<script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>



	<!-- Latest compiled and minified CSS -->
<!--<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<!--<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>-->

<style>
	.flat-table {
  display: block;
  font-family: sans-serif;
  /*-webkit-font-smoothing: antialiased;*/
  /*font-size: 115%;*/
  font-size: 110%;
  
  overflow: auto;
  width: auto;
}
  th {
    background-color: rgb(112, 196, 105);
    color: white;
    /*color: black;*/
    
    font-weight: normal;
    /*padding: 20px 30px;*/
        padding: 8px 12px;
    text-align: center;
  }
  td {
    background-color: rgb(238, 238, 238);
    /*color: rgb(111, 111, 111);*/
    color: rgb(0, 0, 0);
    
    /*padding: 20px 30px;*/
     padding: 8px 12px;
  }
</style>
</head>

<body ng-controller="SampleCtrl">
	<div class="container">
		<!-- <div class="well">Basic Well</div> -->
		  <div class="jumbotron">
    <h1>bus05定時車機資訊</h1> 
    <!--<p>https://youbike2.firebaseio.com/</p> -->
  </div>
	<!-- <div class="row"> -->
		<div class="col-md-2">
			<!--Sidebar content-->

			Search: <input ng-model="query">

		</div>
		<!--<table class="table table-bordered" class='flat-table'>-->
		<table  class='flat-table'>
			
		<!-- 	<th><a href="" ng-click="orderByField='sno'; reverseSort = !reverseSort">item</a></th> -->
			<th></th>
			<th><a style="color:white" href="" ng-click="orderByField='BusID'; reverseSort = !reverseSort">BusID</a></th>
			<th><a style="color:white" href="" ng-click="orderByField='CarType'; reverseSort = !reverseSort">CarType</a></th>
			<th><a style="color:white" href="" ng-click="orderByField='Azimuth'; reverseSort = !reverseSort">Azimuth</a></th>
			<th><a style="color:white" href="" ng-click="orderByField='RouteID'; reverseSort = !reverseSort">RouteID</a></th>

			<th><a  style="color:white" href="" ng-click="orderByField='Latitude'; reverseSort = !reverseSort">Latitude</a></th>



			<th><a  style="color:white" href="" ng-click="orderByField='Longitude'; reverseSort = !reverseSort">Longitude</a></th>
			<th><a  style="color:white" href="" ng-click="orderByField='DataTime'; reverseSort = !reverseSort">DataTime</a></th>




		<!-- 	<th><a href="" ng-click="orderByField='mday'; reverseSort = !reverseSort">update</a></th>
			<th><a href="" ng-click="orderByField='act'; reverseSort = !reverseSort">狀態 </a></th> -->
			 	<!-- <th>update</th>  -->

			<tr ng-repeat="msg in messages |  filter:query | orderBy:orderByField:reverseSort" >
				<!-- <td>{{ msg.sno }}</td> -->
				<th>{{ 1+$index }}</th>
				<td>{{ msg.BusID}}</td>
				<td>{{ msg.CarType}}</td>
				<td>{{ msg.Azimuth}}</td>
				<td>{{ msg.RouteID}}</td>
				<td>{{ msg.Latitude }}</td>
				<td>{{ msg.Longitude }}</td>
				<!--<td>{{ msg.DataTime.replace("/Date(","").replace("+0800)/","") | date:'yyyy-MM-dd HH:mm:ss Z' }}</td>-->
				<td>{{ msg.DataTime.replace("/Date(","").replace("+0800)/","") | date:'HH:mm:ss' }}</td>
				<!-- <td>{{ msg.mday}}</td> -->
			<!-- 	<td>{{ msg.mday.substring(4, 6) }}/{{ msg.mday.substring(6, 8) }} {{ msg.mday.substring(8, 10) }}:{{ msg.mday.substring(10, 12) }}:{{ msg.mday.substring(12, 14) }}</td> -->

	<!-- 	<td>{{ msg.mday.substring(8, 10) }}:{{ msg.mday.substring(10, 12) }}:{{ msg.mday.substring(12, 14) }}</td>

				<td>{{ msg.act }}</td> -->

			</tr>
		</table>
	<!-- </div> -->
	</div>

	<!-- 	<ul>
			<li ng-repeat="msg in messages">
				【{{ msg.sno }}】 {{ msg.sna }}</strong><br>【{{ msg.sarea }}】{{ msg.ar }} <br>【可借】{{ msg.sbi }}　【可還】{{ msg.bemp }} 【格數】{{ msg.tot }}<br>【更新時間】{{ msg.mday.substring(4, 6) }}/{{ msg.mday.substring(6, 8) }} {{ msg.mday.substring(8, 10) }}:{{ msg.mday.substring(10, 12) }}:{{ msg.mday.substring(12, 14) }} 【可用狀態】{{ msg.act }}
				<!-- edit a message -->
				<!-- <input ng-model="message.text" ng-change="messages.$save(message)" /> -->

				<!-- delete a message -->
				<!-- <button ng-click="messages.$remove(message)">Delete Message</button> 
			</li>
		</ul> -->

		<!-- push a new message onto the array -->
<!--     <form ng-submit="addMessage()">
      <input ng-model="newMessageText" />
      <button type="submit">Add Message</button>
  </form> -->


<script>
// var ref = new Firebase("https://dinosaur-facts.firebaseio.com/dinosaurs");
// ref.orderByKey().on("child_added", function(snapshot) {
//   console.log(snapshot.key());
// });
	
  //var ref = new Firebase("https://dinosaur-facts.firebaseio.com/dinosaurs");
  //ref.orderByChild("height").on("child_added", function(snapshot) {
  //  console.log(snapshot.key() + " was " + snapshot.val().height + " meters tall");
  //});
</script>

<script>
  /*global angular*/
var app = angular.module("sampleApp", ["firebase"]);

app.controller("SampleCtrl", function($scope, $firebaseArray) {
  // var ref = new Firebase("https://twcloudwebapp-001.firebaseio.com/messages");
  //https://taipei-omg-2016.firebaseio.com/bus05定時車機資訊
  /*global Firebase*/
  var ref = new Firebase("https://taipei-omg-2016.firebaseio.com/bus05%E5%AE%9A%E6%99%82%E8%BB%8A%E6%A9%9F%E8%B3%87%E8%A8%8A/BusInfo");

//bus09路線
var ref09Route = new Firebase("https://taipei-omg-2016.firebaseio.com/bus09%E8%B7%AF%E7%B7%9A/BusInfo");

// var ref = new Firebase("https://dinosaur-facts.firebaseio.com/dinosaurs");
ref09Route.orderByChild("Id").limitToFirst(2).on("child_added", function(snapshot) {
  console.log(snapshot.key() + " was " + snapshot.val().Id + snapshot.val().nameZh + " meters tall <<<<<<<<<<<<<<<<<<<<<<<");
});


// ref09Route.once("value", function(snapshot) {
//   // The callback function will get called twice, once for "fred" and once for "barney"
//   snapshot.forEach(function(childSnapshot) {
//     // key will be "fred" the first time and "barney" the second time
//     var key = childSnapshot.key();
//     console.log("key is "+key);

//     // childData will be the actual contents of the child
//     var childData = childSnapshot.val();
//     console.log("...nameZh is "+"["+childData.Id+"]"+childData.nameZh);
//   });
// });




  //ref.orderByKey().on("child_added", function(snapshot) {
  //  console.log(snapshot.key());
  //});
  //ref.orderByChild("BusID").on("child_added", function(snapshot) {
  //  console.log(snapshot.key() + " was " + snapshot.val().BusID + " meters tall");
  //});
  // create a synchronized array
  $scope.messages = $firebaseArray(ref);
  //$scope.messages = $firebaseArray(ref2);// how to use order ref?
  

  // add new items to the array
  // the message is automatically added to our Firebase database!
  $scope.addMessage = function() {
  	$scope.messages.$add({
  		text: $scope.newMessageText
  	});
  };

  // click on `index.html` above to see $remove() and $save() in action
});
</script>
</body>
</html>